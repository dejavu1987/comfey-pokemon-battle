{"version":3,"sources":["node_modules/comfey/index.js","src/config.js","src/index.js"],"names":["Comfey","constructor","root","document","debug","rootIdentifier","tagName","id","debugUI","createElement","addEventListener","e","preventDefault","target","style","top","pageY","left","pageX","setAttribute","innerHTML","appendChild","useState","state","initialVal","watcher","stateName","value","updateView","debugRow","querySelector","newVal","boundElems","querySelectorAll","boundEl","boundVisibleElems","val","comparator","dataset","bindVisible","split","console","warn","classList","add","remove","boundHiddenElems","boundClassElems","bindClass","className","boundAttrElems","attr","bindAttr","replaceAll","removeAttribute","_default","exports","default","GIFT_COOLDOWN","BATTERY_LIFE","STARTING_VALUES","CP","RASP","POTION","HP","MOTIVATION","GAME_STATUS","BOOTING","ACTIVE","OVER","_comfey","_interopRequireDefault","require","_config","obj","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","err","return","isArray","DEBUG","app","getElementById","btnFeed","btnHeal","btnBattle","btnGift","btnRestart","_app$useState","_app$useState2","getBooting","setBooting","_app$useState3","gameStatusWatcher","_app$useState4","getGameStatus","setGameStatus","_app$useState5","_app$useState6","getCp","setCp","_app$useState7","_app$useState8","getRasp","setRasp","_app$useState9","_app$useState10","getPotion","setPotion","_app$useState11","_app$useState12","getClock","setClock","_app$useState13","_app$useState14","getBattery","setBattery","_app$useState15","_app$useState16","getHp","setHp","_app$useState17","_app$useState18","getHighScore","setHighscore","_app$useState19","_app$useState20","getMotivation","setMotivation","random","min","max","Math","ceil","setInterval","booting","battery","current"],"mappings":"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","file":"src.7f371e88.js","sourceRoot":"..","sourcesContent":["/**\n * Comfey\n *\n * Lightweight framework for keeping state for your vanilla Js and simple data binding for HTML\n *\n * Comfey #764 (Japanese: キュワワー Cuwawa) is a Fairy-type Pokémon introduced in Generation VII.\n * It is not known to evolve into or from any other Pokémon.\n *\n * @author Anil Maharjan <anilmaharjan.com.np>\n **/\n\nclass Comfey {\n  /**\n   * Creates an instance of Comfey.\n   * @param {Node} [root=document] Root DOM node of your application, defaults to document\n   * @param {boolean} [debug=false] Flag to enable debug mode\n   * @memberof Comfey\n   */\n  constructor(root = document, debug = false) {\n    this.root = root;\n    this.debug = debug;\n\n    if (debug) {\n      const rootIdentifier =\n        root.tagName + (root.id != '' ? '#' + root.id : '');\n      const debugUI = document.createElement('div');\n      debugUI.addEventListener('dragend', (e) => {\n        e.preventDefault();\n        e.target.style.top = `${e.pageY}px`;\n        e.target.style.left = `${e.pageX}px`;\n      });\n      debugUI.setAttribute('class', 'comfey-debug');\n      debugUI.setAttribute('draggable', true);\n      debugUI.innerHTML = `<h2>Comfey Debug (${rootIdentifier})</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>State</th>\n              <th>Value</th>\n            </tr>\n          </thead>\n          <tbody>\n          </tbody>`;\n      this.root.appendChild(debugUI);\n    }\n  }\n  /**\n   *\n   * Initializes a new state and returns getter and setter for the state\n   * @param {string} state name of the state\n   * @param {any} initialVal initial value\n   * @param {function} watcher watcher function that will be called everytime the value of the state changes\n   *\n   * @returns {Array<[function, function]>} getterFunction and SetterFunction\n   */\n  useState(state, initialVal, watcher) {\n    const stateName = state;\n    let value = initialVal;\n    const setter = (newVal) => {\n      if (watcher) watcher(newVal, value, stateName);\n      value = newVal;\n      this.updateView(stateName, value);\n    };\n    this.updateView(stateName, value);\n    if (this.debug) {\n      const debugRow = document.createElement('tr');\n      debugRow.innerHTML = `\n              <th>${state}</th>\n              <td>\n                <span data-bind=\"${state}\"></span>\n              </td>\n            `;\n      this.root.querySelector('.comfey-debug tbody').appendChild(debugRow);\n    }\n    return [() => value, setter];\n  }\n\n  /**\n   * Update DOM, gets triggered by State updates\n   * @private\n   * @param {string} stateName\n   * @param {*} value\n   * @return {void}\n   * @memberof Comfey\n   */\n  updateView(stateName, value) {\n    const boundElems = this.root.querySelectorAll(`[data-bind=\"${stateName}\"]`);\n    for (const boundEl of boundElems) {\n      boundEl.innerHTML = value;\n    }\n\n    // Visible\n    const boundVisibleElems = this.root.querySelectorAll(\n      `[data-bind-visible^=\"${stateName}\"]`\n    );\n\n    for (const boundEl of boundVisibleElems) {\n      const [, val, comparator] = boundEl.dataset.bindVisible.split('::');\n      if (comparator) {\n        console.warn(\n          'Comfey: Comparators are not yet supported in bind-visible.'\n        );\n      }\n      if (val) {\n        if (val === value) {\n          boundEl.classList.add('visible');\n        } else {\n          boundEl.classList.remove('visible');\n        }\n      } else if (value) boundEl.classList.add('visible');\n      else boundEl.classList.remove('visible');\n    }\n\n    // Hidden\n    const boundHiddenElems = this.root.querySelectorAll(\n      `[data-bind-hidden=\"${stateName}\"]`\n    );\n    for (const boundEl of boundHiddenElems) {\n      if (value) boundEl.classList.add('hidden');\n      else boundEl.classList.remove('hidden');\n    }\n\n    // Classes\n    const boundClassElems = this.root.querySelectorAll(\n      `[data-bind-class^=\"${stateName}:\"]`\n    );\n    for (const boundEl of boundClassElems) {\n      const [, val, comparator] = boundEl.dataset.bindClass.split('::');\n      const className = val;\n      if (!className) return;\n\n      if (\n        (value && !comparator) ||\n        (value && comparator && value == comparator)\n      )\n        boundEl.classList.add(className);\n      else boundEl.classList.remove(className);\n    }\n\n    // Attr\n    const boundAttrElems = this.root.querySelectorAll(\n      `[data-bind-attr^=\"${stateName}:\"]`\n    );\n    for (const boundEl of boundAttrElems) {\n      const [, attr, val] = boundEl.dataset.bindAttr.split('::');\n      if (value) boundEl.setAttribute(attr, val.replaceAll('$', value));\n      else boundEl.removeAttribute(attr);\n    }\n  }\n}\n\nexport default Comfey;\n","export const GIFT_COOLDOWN = 10;\nexport const BATTERY_LIFE = 40;\nexport const STARTING_VALUES = {\n  CP: 10,\n  RASP: 10,\n  POTION: 10,\n  HP: 50,\n  MOTIVATION: 50\n};\nexport const GAME_STATUS = {\n  BOOTING: \"booting\",\n  ACTIVE: \"active\",\n  OVER: \"over\"\n};\n","import Comfey from \"comfey\";\nimport \"./styles.css\";\n\nimport {\n  BATTERY_LIFE,\n  GAME_STATUS,\n  STARTING_VALUES,\n  GIFT_COOLDOWN\n} from \"./config\";\n\nconst DEBUG = true;\nconst app = new Comfey(document.getElementById(\"app\"), DEBUG);\n\n// Select buttons\nconst btnFeed = document.getElementById(\"feed\");\nconst btnHeal = document.getElementById(\"heal\");\nconst btnBattle = document.getElementById(\"battle\");\nconst btnGift = document.getElementById(\"gift\");\nconst btnRestart = document.getElementById(\"restart\");\n\n// Initialize states\nconst [getBooting, setBooting] = app.useState(\"booting\", 1);\nconst [getGameStatus, setGameStatus] = app.useState(\n  \"gameStatus\",\n  GAME_STATUS.BOOTING,\n  gameStatusWatcher\n);\nconst [getCp, setCp] = app.useState(\"cp\", STARTING_VALUES.CP);\nconst [getRasp, setRasp] = app.useState(\"rasp\", STARTING_VALUES.RASP);\nconst [getPotion, setPotion] = app.useState(\"potion\", STARTING_VALUES.POTION);\nconst [getClock, setClock] = app.useState(\"clock\", GIFT_COOLDOWN);\nconst [getBattery, setBattery] = app.useState(\"battery\", BATTERY_LIFE);\nconst [getHp, setHp] = app.useState(\"hp\", 50);\nconst [getHighScore, setHighscore] = app.useState(\"highScore\", 0);\n\nconst [getMotivation, setMotivation] = app.useState(\n  \"motivation\",\n  STARTING_VALUES.MOTIVATION\n);\n\nfunction gameStatusWatcher(newVal) {\n  if (newVal === GAME_STATUS.BOOTING) {\n    setCp(STARTING_VALUES.CP);\n    setHp(STARTING_VALUES.HP);\n    setRasp(STARTING_VALUES.RASP);\n    setPotion(STARTING_VALUES.POTION);\n    setMotivation(STARTING_VALUES.MOTIVATION);\n    setBattery(BATTERY_LIFE);\n    setClock(GIFT_COOLDOWN);\n  }\n}\n\n// Button behaviours\nbtnFeed.addEventListener(\"click\", () => {\n  setMotivation(Math.min(getMotivation() + 10, 100));\n  setRasp(Math.max(getRasp() - 1, 0));\n});\n\nbtnHeal.addEventListener(\"click\", () => {\n  setHp(Math.min(getHp() + 8, 100));\n  setPotion(Math.max(getPotion() - 1, 0));\n});\n\nbtnBattle.addEventListener(\"click\", () => {\n  setCp(getCp() + getMotivation());\n  setMotivation(Math.max(getMotivation() - random(5, 10), 0));\n  setHp(Math.max(getHp() - random(5, 10), 0));\n});\n\nbtnGift.addEventListener(\"click\", () => {\n  setRasp(getRasp() + random(0, 4));\n  setPotion(getPotion() + random(0, 5));\n  setClock(GIFT_COOLDOWN);\n});\n\nbtnRestart.addEventListener(\"click\", () => {\n  setGameStatus(GAME_STATUS.BOOTING);\n});\n\n// Timed behaviours\nsetInterval(() => {\n  switch (getGameStatus()) {\n    case GAME_STATUS.BOOTING:\n      const booting = getBooting();\n      if (booting < 100) {\n        setBooting(Math.min(booting + random(5, 55), 100));\n      } else {\n        setBooting(0);\n        setGameStatus(GAME_STATUS.ACTIVE);\n      }\n      break;\n\n    case GAME_STATUS.ACTIVE:\n      const battery = getBattery();\n      if (battery) {\n        setBattery(battery - 1);\n      } else {\n        setGameStatus(GAME_STATUS.OVER);\n      }\n      const current = getClock();\n      if (current) {\n        setClock(current - 1);\n      }\n      break;\n\n    case GAME_STATUS.OVER:\n      setHighscore(Math.max(getHighScore(), getCp()));\n      break;\n\n    default:\n      break;\n  }\n}, 1000);\n\n// Utility functions\nfunction random(min, max) {\n  return Math.ceil(Math.random() * (max - min) + min);\n}\n"]}